# Justicar

## Project Overview

This project is a Go-based, text-based RPG called "Justicar." It uses the Gemini API to generate dynamic, narrative-driven gameplay and Supabase to persist player data. The game is set in a gritty, near-future world where the player takes on the role of Caleb Reed, a 21-year-old student who becomes the world's first trillionaire.

The project is structured as follows:

*   `main.go`: The main entry point of the application. It handles the connection to Supabase, checks for existing player data, and initiates the game loop.
*   `prompt.go`: Contains the system prompt that provides the initial context and instructions to the Gemini model for generating the game's narrative.
*   `go.mod` and `go.sum`: Manage the project's dependencies.
*   `.env`: A file to store the necessary API keys and credentials for Supabase and the Gemini API. This file is ignored by Git.

## Collaboration Workflow: The Architect and The Engineer

This project follows a specific workflow to ensure smooth collaboration between the user (the Architect) and the Gemini CLI (the Engineer).

*   **The Architect (User/Gemini Pro Chat):** Responsible for high-level design, narrative, and game mechanics. All creative and brainstorming work is done here. The output of this phase is a "blueprint"â€”a clear, non-technical, natural language description of the desired feature.

*   **The Engineer (Gemini CLI):** Responsible for all technical implementation. The Engineer takes the blueprint from the Architect and handles all coding, debugging, and verification based on the actual project files and constraints.

**The Golden Rule:** The handoff from Architect to Engineer must always be in natural language, describing *what* should be built, not *how* it should be built.

## Building and Running

To build and run this project, you will need to have Go installed on your system.

1.  **Set up Environment Variables:**

    Create a `.env` file in the root of the project and add the following lines, replacing the placeholder values with your actual credentials:

    ```
    SUPABASE_URL="your_supabase_url"
    SUPABASE_KEY="your_supabase_key"
    GEMINI_API_KEY="your_gemini_api_key"
    ```

2.  **Install Dependencies:**

    Open a terminal in the project's root directory and run the following command to download and install the required dependencies:

    ```bash
    go mod tidy
    ```

3.  **Run the Game:**

    Once the dependencies are installed, you can run the game with the following command:

    ```bash
    go run .
    ```

## Development Conventions

*   **Dependency Management:** The project uses Go modules for dependency management. Any new dependencies should be added using `go get`.

*   **Environment Variables:** All secrets and environment-specific configurations are managed through a `.env` file using the `godotenv` library.

*   **Database:** The game uses Supabase to store player data. The `Player` struct in `main.go` defines the schema for the `player` table.

*   **AI-Generated Content:** The narrative of the game is generated by the Gemini API.
    *   **SDK:** We use the official Google Generative AI SDK for Go: `google.golang.org/genai`.
    *   **Version:** The project is currently using version `v1.25.0`.
    *   **Documentation:** The documentation for this specific SDK version can be found at [pkg.go.dev/google.golang.org/genai@v1.25.0](https://pkg.go.dev/google.golang.org/genai@v1.25.0).
    *   **Model:** The project is configured to use the `gemini-2.5-pro` model.